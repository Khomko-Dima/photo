document.addEventListener("DOMContentLoaded",(function(){"use strict";const e=document.getElementById("wishlist"),t=document.querySelector(".category-list"),a=document.querySelector(".img-wrapper"),s=document.querySelector(".location"),c=document.querySelector(".location-list"),n=document.querySelector(".typeLocation"),o=document.querySelector(".typeLocation-list"),i=document.querySelector(".season"),l=document.querySelector(".season-list");let r,d,m,g=null;const u=[],v=(e,t)=>{fetch("base.json").then(e=>e.json()).then(t).then(e)},y=e=>{a.textContent="",e.length?e.forEach(({id:e,category:t,location:s,typeLocation:c,season:n,title:o,img:i})=>{a.appendChild(((e,t,a,s,c,n,o)=>{const i=document.createElement("div");let l=[];return[t,a,s,c].forEach((e,t)=>{let a="";e.forEach((e,t,s)=>{a+=`${e}${t+1==s.length?"":", "}`}),l[t]=a}),i.className="card-wrapper col-12 col-md-6 col-lg-4 col-xl-3 pb-3",i.innerHTML=`\n                        <div class="card">\n                            <div class="card-img-wrapper">\n                                <img class="card-img-top" src="${o}" alt="${n}">\n                                <button \n                                    class="card-add-wishlist ${u.includes(e)?"active":""}"\n                                    data-img-id="${e}"\n                                    >&#10084;\n                                </button>\n                            </div>\n                            ${l[0]?`<span>Категории: ${l[0]}</span><br>`:""}\n                            ${l[1]?`<span>Локация: ${l[1]}</span><br>`:""}\n                            ${l[2]?`<span>Тип локация: ${l[2]}</span><br>`:""}\n                            ${l[3]?`<span>Сезон: ${l[3]}</span>`:""}\n                        </div>`,i})(e,t,s,c,n,o,i))}):a.textContent="Извените мы не нашли изображение по вашему запросу"},L=e=>{e?localStorage.getItem("whishlist")&&u.push(...JSON.parse(localStorage.getItem("whishlist"))):localStorage.setItem("whishlist",JSON.stringify(u))},p=e=>{e.classList.add("active")},f=e=>{e.forEach(e=>{const t=[...e.getElementsByTagName("a")];E(t),e.classList.contains("active")&&e.classList.remove("active")})},E=(e,t)=>{e.forEach(e=>{e.classList.contains("active")&&e.classList.remove("active"),t&&t.classList.add("active")})};L(!0),t.addEventListener("click",e=>{e.preventDefault();const a=e.target;if(a.classList.contains("category-item")){r=a.dataset.category,f([s,n,i]);const e=[...t.getElementsByTagName("a")];E(e,a),v(y,e=>e.filter(e=>e.category.includes(r))),p(s)}}),c.addEventListener("click",e=>{e.preventDefault();const t=e.target;if(t.classList.contains("category-item")){d=t.dataset.category,f([n,i]);const e=[...c.getElementsByTagName("a")];E(e,t),v(y,e=>e.filter(e=>e.location.includes(d)&&e.category.includes(r))),"Уличная"==t.dataset.category&&p(n)}}),o.addEventListener("click",e=>{e.preventDefault();const t=e.target;if(t.classList.contains("category-item")){m=t.dataset.category,(e=>{e.classList.remove("active");const t=[...e.getElementsByTagName("a")];E(t)})(i);const e=[...o.getElementsByTagName("a")];E(e,t),v(y,e=>e.filter(e=>e.category.includes(r)&&e.location.includes(d)&&e.typeLocation.includes(m))),p(i)}}),l.addEventListener("click",e=>{e.preventDefault();const t=e.target;if(t.classList.contains("category-item")){g=t.dataset.category;const e=[...l.getElementsByTagName("a")];E(e,t),v(y,e=>e.filter(e=>e.category.includes(r)&&e.location.includes(d)&&e.typeLocation.includes(m)&&e.season.includes(g)))}}),e.addEventListener("click",e=>{const a=e.target;f([s,n,i]);const c=[...t.getElementsByTagName("a")];E(c,a),v(y,e=>e.filter(e=>u.includes(e.id)))}),a.addEventListener("click",e=>{const t=e.target;var a,s;t.classList.contains("card-add-wishlist")&&(a=t.dataset.imgId,s=t,u.includes(a)?(u.splice(u.indexOf(a),1),s.classList.remove("active")):(u.push(a),s.classList.add("active")),L()),t.classList.contains("goods-delete")&&removeGoods(t.dataset.goodsId)})})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".opacity-nav"),t=(document.querySelector(".header"),document.querySelector(".open-menu")),a=document.querySelector(".close-menu");console.log(t.offsetParent),t.addEventListener("click",t=>{const s=t.target;e.classList.add("active"),s.offsetParent.classList.remove("active"),a.parentElement.classList.add("active")}),a.addEventListener("click",a=>{const s=a.target;e.classList.remove("active"),s.offsetParent.classList.remove("active"),t.parentElement.classList.add("active")})}));